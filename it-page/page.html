<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <div class="feedback-button" id="feedbackWidget">Feedback</div>

    <div class="rating-widget" id="ratingWidget">
        <span class="close-star" id="closeStar">&times;</span>
        <h3>How would you rate our Information Technology website?  </h3>
        <div class="stars" id="stars">
            <span class="star" data-rating="1">&#9733;</span>
            <span class="star" data-rating="2">&#9733;</span>
            <span class="star" data-rating="3">&#9733;</span>
            <span class="star" data-rating="4">&#9733;</span>
            <span class="star" data-rating="5">&#9733;</span>
        </div>
        <button type="button" id="nextSelection">Next</button>

        <form id="feedbackForm" style="display: none;">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            
            <label for="feedback">Feedback:</label>
            <textarea id="feedback" name="feedback" rows="4" required></textarea>
            
            <button type="button" id="submitFeedback">Submit</button>
        </form>
        <p id="selectedRating">Your rating: <span id="selectedStars">0</span></p>
    </div>

    <script>
     document.addEventListener('DOMContentLoaded', function () {
    const feedbackButton = document.getElementById('feedbackWidget');
    const ratingWidget = document.getElementById('ratingWidget')
    const closeStar = document.getElementById('closeStar');
    const stars = document.getElementById('stars');
    const nextSelection = document.getElementById('nextSelection');
    const submitFeedbackButton = document.getElementById('submitFeedback');
    const selectedStars = document.getElementById('selectedStars');
    const feedbackForm = document.getElementById('feedbackForm');

    // Initially hide the feedback form
    ratingWidget.style.display = 'none';

    // Event listener for opening the feedback form
    feedbackButton.addEventListener('click', function () {
        ratingWidget.style.display = 'block';
        feedbackForm.style.display = 'none';
        feedbackButton.classList.add('feedback-button-active');
        feedbackButton.style.display = 'none';
    });

    // Event listener for closing the feedback form
    closeStar.addEventListener('click', function () {
        ratingWidget.style.display = 'none';
        feedbackButton.classList.remove('feedback-button-active');
        feedbackButton.style.display = 'block'; 
    });

    // Event listener for selecting stars
    stars.addEventListener('click', function (event) {
        if (event.target.classList.contains('star')) {
            const rating = event.target.getAttribute('data-rating');
            selectedStars.textContent = rating;
        }
    });

    // Event listener to move to the feedback form
    nextSelection.addEventListener('click', function () {
        stars.style.display = 'none';
        feedbackForm.style.display = 'block';
        nextSelection.style.display = 'none';
    });

    // Event listener for submitting feedback
    submitFeedbackButton.addEventListener('click', function () {
        const email = document.getElementById('email').value;
        const feedback = document.getElementById('feedback').value;
        const rating = selectedStars.textContent;

        //perform action with email, feedback, and rating.
        console.log('email:', email);
        console.log('feedback:', feedback);
        console.log('Rating:' , rating);

        //Reset for feedback form
        feedbackForm.reset();

        //Reset the star selection
        selectedStars.textContent = '0';

        //Action to hide the rating forms.
        ratingWidget.style.display = 'none'

        //Action to show the feedback button.
        feedbackButton.classList.remove('feedback-button-active');
        
    });
});
    </script>
</body>
</html>
